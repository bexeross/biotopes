---
title: "Prep input data, including species cleaning"
author: "GGM & RR"
date: "09/29/2021"
output: html_notebook
---

## Libraries
```{r}
library(twinspan)
library(tidyr)
```


## Make the matrix into wide format
```{r}
trimmedwide <- trimmed %>% select(-c(TotAbu_pseudocount,TotAbu_count,density_n_100m2_count,clean_taxonomy)) %>%
  mutate(new_name = gsub(" ","",new_name)) %>%
  mutate(new_name = gsub("\\.","",new_name)) %>%
  mutate(new_name = tolower(new_name)) %>%
  pivot_wider(names_from = new_name, values_from = density_n_100m2_pseudocount, values_fill = 0, values_fn = sum)

head(trimmedwide)
```
## Subset samples
### Import necessary data
```{r}
sample_info <- read.csv(file.path(dataPath,"sample_info.csv"))
refer <- read.csv(file.path(dataPath,"reference.csv"), sep ="|")
```

### examine distribution of surveyed area
```{r}
hist(sample_info$area_m2)
```

### set thresholds for data quality
```{r}
# threshold for total surveyed area
survarea_thrs <- 2100

# threshold for picture quality
```

## Twinspan
```{r}
tw_1 <- trimmedwide %>%
  select(-SampID) %>%
  #subset()
  twinspan()
```

